2 sLastKod$ = "BRAK KODU"
3 mT% = 8
4 sT% = 10
5 C%=1
6 zDo%=1
7 B%=1
8 X%=0
9 zL%=48
10 zX%=16
11 zY%=2
20 zKG%=300
21 zKS%=53
22 zKW%=64
23 zKL%=5
30 zS$="2;16H"
31 zii%=0
32 ziPos%=-1

113 KEY 10 ON
114 KEY 14 ON
115 KEY 11 ON
116 KEY 12 ON
117 KEY 13 ON
118 KEY 16 ON
119 KEY 17 ON
120 KEY 20 OFF
122 ON KEY 10 GOSUB 7000
123 ON KEY 17 GOSUB 6000
124 ON KEY 14 GOSUB 3100
125 ON KEY 11 GOSUB 3200
126 ON KEY 12 GOSUB 3300
127 ON KEY 13 GOSUB 3400
128 ON KEY 16 GOSUB 5000
130 ON ERROR GOTO 10000

235 CLIP ON
236 NASC 1250
237 SYSVAR(84) = 60
238 SYSVAR(85) = 62

241 DISPLAY KEY 1,20
242 DISPLAY KEY 2,0
243 DISPLAY KEY 3,20
244 DISPLAY KEY 4,0
245 DISPLAY KEY 5,20

340 OPEN "console:" FOR OUTPUT AS 1
350 COMSET 9,"","!","","",30
360 ON COMSET 9 GOSUB 2000
390 GOSUB 9000
403 DIM zKODY$(4000), zNAZWA$(4000), zOPIS$(4000)

409 GOSUB 4000
410 COMSET 9 ON
1000 PRINT #1, " KONIEC"
520 IF B%=1 THEN GOTO 520



1000 PRINT #1, " KONIEC"
1004 PRINT #1, "ERR:";STR$(ERR);
1006 CLOSE 1
1007 CLOSE 10
1008 CLOSE 20
1010 END
2000 A$=COMBUF$(9)
2001 sLastKod$ = A$
2002 GOSUB 8000
2008 GOSUB 40000
2009 'czytanie z pliku 20000
2010 PRPOS (6*zKG%)-7,(2*zKG%)
2020 ALIGN 1
2030 DIR 4
2040 FONT "Univers",sT%
2050 'PRTXT "KOD: ";A$
2060 PRPOS (9*zKG%)-2,(2*zKG%)
2070 PRLINE zKG%*(zKW%-6),6
2090 'OPEN "TEST11.TXT" FOR INPUT AS #10
2101 'WHILE NOT EOF(10)
2102 'INPUT#10, qB$, qC$, qD$
2103 'IF qB$=sLastKod$ THEN
2104 'GOTO 2160
2105 'ELSE
2106 'qD$ = "Brak informacji."	
2107 'qB$ = "Brak kodu w bazie."
2108 'qC$ = "Brak nazwy produktu."
2109 'ENDIF
2110 'WEND
2160 PRPOS 13*zKG%,2*zKG%
2170 PRTXT "Kod z bazy: ";qB$

2171 GOSUB 4000
2180 PRPOS (17*zKG%)+2,(2*zKG%)
2189 FONT "Univers",sT%-2
2190 PRTXT "NAGRODA:  ";qC$
2195 PRPOS (21*zKG%),(2*zKG%)
2196 PRTXT "Opis:"
2211 FONT "Univers",mT%
2243 PRPOS zKG%*(zKS%-6),(2*zKG%)+10
2244 ALIGN 7
2252 PRBOX zKG%*(zKS%-27),zKG%*(zKW%-8),2,qD$,5,-5
2253 ALIGN 1
2550 PRPOS zKG%*(zKS%-4),(2*zKG%)
2555 PRLINE zKG%*(zKW%-6),6
2560 PRPOS zKG%*(zKS%),(3*zKG%)
2565 FONT "Univers",sT%
2570 PRTXT "Zapraszamy do zakupów :)"
2600 PRPOS zKG%*(zKS%),zKG%*(zKW%-20)
2605 MAG 1,1
2606 PRIMAGE "POSNET.BMP"
2900 PRINTFEED C%
2960 ziPos%=-1
2970 'CLOSE 10
2980 COMSET 9 ON
2981 A$=""
2982 qB$=""
2983 qC$=""
2984 qd$=""
2990 RETURN
3100 IF zDo%=1 THEN
3101 zY%=zY%+1
3110 IF zY%>2 THEN
3120 zY%=2
3130 ENDIF
3131 zS$ = STR$(zY%)+";"+STR$(zX%)+"H"
3135 GOSUB 4000
3140 ELSE
3150 C%=C%-1
3155 IF C%<1 THEN
3159 C%=1
3160 ENDIF
3165 GOSUB 7400
3180 ENDIF
3190 RETURN
3200 IF zDo%=1 THEN
3201 zX%=zX%-1
3210 IF zX%<1 THEN
3220 zX%=1
3230 ENDIF
3231 zS$ = STR$(zY%)+";"+STR$(zX%)+"H"
3235 GOSUB 4000	
3280 ENDIF
3290 RETURN
3300 IF zDo%=1 THEN
3301 zY%=zY%-1
3310 IF zY%<1 THEN
3320 zY%=1
3330 ENDIF
3331 zS$ = STR$(zY%)+";"+STR$(zX%)+"H"
3335 GOSUB 4000
3340 ELSE
3350 C%=C%+1
3355 IF C%>10 THEN
3359 C%=10
3360 ENDIF
3365 GOSUB 7400
3380 ENDIF
3390 RETURN
3400 IF zDo%=1 THEN
3401 zX%=zX%+1
3410 IF zX%>16 THEN
3420 zX%=16
3430 ENDIF
3431 zS$ = STR$(zY%)+";"+STR$(zX%)+"H" 
3435 GOSUB 4000
3440 ENDIF
3440 RETURN

4000 PRINT #1
4010 PRINT #1
4020 PRINT #1, "Skanuj kod tow."
4030 PRINT #1, MID$(sLastKod$,1,13);
4031 PRINT #1, CHR$(155)+"5p";
4032 PRINT #1, CHR$(155)+"2p";
4033 PRINT #1, CHR$(155)+zS$;
4090 RETURN


5000 B%=0
5010 RETURN
6000 TESTFEED
6010 RETURN
7000 zDo%=2
7001 KEY 11 OFF
7002 KEY 13 OFF
7008 DISPLAY KEY 3,103
7009 DISPLAY KEY 4,105
7010 GOSUB 7400
7035 COMSET 9 OFF
7120 IF B%=1 THEN  GOTO 7120
7121 ENDIF
7130 B%=1
7134 COMSET 9 OFF
7135 COMSET 9 ON
7136 KEY 11 ON
7137 KEY 13 ON
7138 DISPLAY KEY 3,0
7139 DISPLAY KEY 4,0
7150 GOSUB 4000
7151 zDo%=1
7200 RETURN
7400 PRINT #1
7410 PRINT #1
7420 PRINT #1, "U!: Etykiety"
7430 PRINT #1, "Ilość: ";c%;
7431 PRINT #1, CHR$(155)+"5p";
7432 PRINT #1, CHR$(155)+"2p";
7433 PRINT #1, CHR$(155)+"2;09H";
7500 RETURN

8000 zAS$ = LEFT$(A$,1)
8010 IF zAS$="2" THEN 
8011 zAS$ = LEFT$(A$,2+zKL%)
8012 sLastKod$ =zAS$
8120 ENDIF
8299 RETURN


9000 PRINT #1, "Konfiguracja"
9090 OPEN "KONF.CF" FOR INPUT AS #20
9102 INPUT#20, qCFG$, qCFD$
9103 zKG% = VAL(qCFD$)
9104 INPUT#20, qCFG$, qCFD$
9105 zKS% = VAL(qCFD$)
9106 INPUT#20, qCFG$, qCFD$
9107 zKW% = VAL(qCFD$)
9108 INPUT#20, qCFG$, qCFD$
9109 C% = VAL(qCFD$)
9110 INPUT#20, qCFG$, qCFD$
9111 zKL% = VAL(qCFD$)
9200 IF zKG%=300 THEN
9201 zKG%=12
9202 ENDIF
9250 IF zKG%=203 THEN
9251 zKG%=8
9252 ENDIF
9260 CLOSE 20
9900 RETURN
10000 IF ERR=1022 THEN
19001 DISPLAY IMAGE 4
19004 IF PRSTAT AND 1 THEN GOTO 19004
19005 DISPLAY IMAGE 0
19007 RESUME
19013 ENDIF
19020 IF ERR=1005 THEN
19021 DISPLAY IMAGE 3
19024 IF (PRSTAT AND 1)=0 THEN GOTO 19024
19025 EFLAG%=0
19026 IF (PRSTAT AND 1)=0 THEN FORMFEED ELSE GOTO 19026
19027 IF EFLAG%=1005 THEN GOTO 19024
19028 IF EFLAG%=1031 THEN GOSUB 19200
19029 DISPLAY IMAGE 0
19030 RESUME
19031 ENDIF
19044 IF ERR=0 THEN
19046 DISPLAY IMAGE 0
19047 RESUME
19048 ENDIF
19190 IF ERR=1031 THEN
19200 DISPLAY IMAGE 6
19240 EFLAG%=0
19250 FORMFEED
19260 IF EFLAG%=1031 THEN GOTO 19240
19270 RETURN
19280 ENDIF
19300 GOTO 1000
20000 OPEN "TEST11.TXT" FOR INPUT AS #10
22101 WHILE NOT EOF(10)
22102 INPUT#10, qB$, qC$, qD$
22103 IF qB$=sLastKod$ THEN
22104 GOTO 22200
22105 ELSE
22106 qD$ = "Brak informacji."	
22107 qB$ = "Brak kodu w bazie."
22108 qC$ = "Brak nazwy produktu."
22109 ENDIF
22110 WEND
22200 CLOSE 10
22300 RETURN



40000 'znajdz towar
40005 PRINT #1, "U!: che!!!"
40006 PRINT #1, "U!: che!!!"
40090 ziz%=0
40100 FOR ziz%=0 TO zii%
40101 zDNS$=zKODY$(ziz%)
40110 IF sLastKod$=zDNS$ THEN
40120 ziPos%=ziz%
40130 GOTO 40200
40150 ENDIF
40151 NEXT
40200 IF ziPos%=-1 THEN
40201 qD$ = "Brak informacji."	
40202 qB$ = "Brak kodu w bazie."
40203 qC$ = "Brak nazwy produktu."
40210 ELSE
40211 qB$ = zKODY$(ziPos%)
40212 qC$ = zNAZWA$(ziPos%)
40213 qD$ = zOPIS$(ziPos%)
40215 ENDIF
41005 PRINT #1, "U!: goo!!!"
41006 PRINT #1, "U!: goo!!!"
42000 RETURN